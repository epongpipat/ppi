---
title: "PPI Data Wrangling: Create Physiological Variable"
date: "`r Sys.Date()`"
output: 
  html_document:
    highlight: textmate
    theme: lumen
    code_folding: hide
    code_download: true
    toc: yes
    toc_depth: 3
    toc_float:
      collapsed: yes
      smooth_scroll: yes
---

## R Libraries
```{r}
packages <- c("tidyverse", "furrr", "ggpubr", "ppi")
xfun::pkg_attach(packages, install = T, message = F)
```

## Parameters
```{r}
params$hrf <- read.csv(params$hrf_file, header = F)
params$phys <- read.csv(params$phys_file, header = F)
```

## Create physiological variable
```{r}
phys_var <- create_phys_var(params$phys_file, params$detrend_factor, params$upsample_factor, params$hrf)
```

## Save Data
```{r}
save_list_data(phys_var, params$phys_file)
```

## Save Figures
```{r}
save_list_data_fig(phys_var, params$phys_file)
```

## Session Information
```{r}
sessionInfo()
```
