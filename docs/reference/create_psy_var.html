<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>create_psy_var — create_psy_var • ppi</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="create_psy_var — create_psy_var" />
<meta property="og:description" content="creates data for each wrangling step of the psychological variable using the data wrangling functions: create_trial_type_by_volume_list(), contrast_code_categorical_variable(), upsample(), convolve_afni(), downsample()" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ppi</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/epongpipat/ppi/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>create_psy_var</h1>
    <small class="dont-index">Source: <a href='https://github.com/epongpipat/ppi/blob/master/R/create_psy_var.R'><code>R/create_psy_var.R</code></a></small>
    <div class="hidden name"><code>create_psy_var.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>creates data for each wrangling step of the psychological variable using the data wrangling functions: <code><a href='create_trial_type_by_volume_list.html'>create_trial_type_by_volume_list()</a></code>, <code><a href='contrast_code_categorical_variable.html'>contrast_code_categorical_variable()</a></code>, <code><a href='upsample.html'>upsample()</a></code>, <code><a href='convolve_afni.html'>convolve_afni()</a></code>, <code><a href='downsample.html'>downsample()</a></code></p>
    </div>

    <pre class="usage"><span class='fu'>create_psy_var</span><span class='op'>(</span>
  <span class='va'>events</span>,
  <span class='va'>contrast_table</span>,
  <span class='va'>hrf</span>,
  <span class='va'>tr</span>,
  <span class='va'>n_volumes</span>,
  upsample_factor <span class='op'>=</span> <span class='cn'>NULL</span>,
  unlabeled_trial_type <span class='op'>=</span> <span class='st'>"fixation"</span>,
  afni_path <span class='op'>=</span> <span class='cn'>NULL</span>,
  afni_quiet <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>events</th>
      <td><p>events data with columns of onset, duration, and trial_type</p></td>
    </tr>
    <tr>
      <th>contrast_table</th>
      <td><p>table of contrast codes</p></td>
    </tr>
    <tr>
      <th>hrf</th>
      <td><p>hemodynamic response function (hrf) time series</p></td>
    </tr>
    <tr>
      <th>tr</th>
      <td><p>repetition time (tr) in seconds</p></td>
    </tr>
    <tr>
      <th>n_volumes</th>
      <td><p>number of volumes or time points</p></td>
    </tr>
    <tr>
      <th>upsample_factor</th>
      <td><p>factor to upsample the trial_type_by_volume data for the convolution step</p></td>
    </tr>
    <tr>
      <th>unlabeled_trial_type</th>
      <td><p>name of trial_type for unlabeleled trial types (default: "fixation")</p></td>
    </tr>
    <tr>
      <th>afni_path</th>
      <td><p>path to afni directory (default: NULL)</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a list of datasets for each data wrangling step of the psychological variables</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>

<span class='co'># this examples uses the following data from openneuro.org</span>
<span class='co'># https://openneuro.org/datasets/ds000171/versions/00001</span>

<span class='co'># in this dataset, participants listen to either positive music,</span>
<span class='co'># negative music, or tones (control). Positive and negative musical stimulus</span>
<span class='co'># are presented for 31.5 seconds and tones are presented for 33 seoncds.</span>
<span class='co'># After each stimulus, participants have 3 seconds to report their valence</span>
<span class='co'># (from very sad to very happy) and arousal (from very passive to very #</span>
<span class='co'># active). the repitition time (tr) for this dataset was 3 and the number of</span>
<span class='co'># volumes collected for this was run 105.</span>


<span class='co'># mri parameters</span>
<span class='va'>tr</span> <span class='op'>&lt;-</span> <span class='fl'>3</span>
<span class='va'>n_volumes</span> <span class='op'>&lt;-</span> <span class='fl'>105</span>

<span class='co'># read events from openneuro.org</span>
<span class='va'>psy_events</span> <span class='op'>&lt;-</span> <span class='fu'>readr</span><span class='fu'>::</span><span class='fu'><a href='https://readr.tidyverse.org/reference/read_delim.html'>read_tsv</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/connections.html'>url</a></span><span class='op'>(</span><span class='st'>"https://openneuro.org/crn/datasets/ds000171/snapshots/00001/files/sub-control01:func:sub-control01_task-music_run-1_events.tsv"</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>trial_type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>trial_type</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'><span style='font-weight: bold;'>Rows: </span><span style='color: #0000BB;'>18</span> <span style='font-weight: bold;'>Columns: </span><span style='color: #0000BB;'>3</span></span></div><div class='output co'>#&gt; <span class='message'><span style='color: #00BBBB;'>──</span> <span style='font-weight: bold;'>Column specification</span> <span style='color: #00BBBB;'>────────────────────────────────────────────────────────</span></span>
#&gt; <span class='message'><span style='font-weight: bold;'>Delimiter:</span> "\t"</span>
#&gt; <span class='message'><span style='color: #BB0000;'>chr</span> (1): trial_type</span>
#&gt; <span class='message'><span style='color: #00BB00;'>dbl</span> (2): onset, duration</span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'><span style='color: #00BBBB;'>ℹ</span> Use <span style='color: #262626; background-color: #DADADA;'>`spec()`</span> to retrieve the full column specification for this data.</span>
#&gt; <span class='message'><span style='color: #00BBBB;'>ℹ</span> Specify the column types or set <span style='color: #262626; background-color: #DADADA;'>`show_col_types = FALSE`</span> to quiet this message.</span></div><div class='input'>
<span class='co'># orthogonal contrast code that test:</span>
<span class='co'># 1. stimulus vs response</span>
<span class='co'># 2. music vs tones</span>
<span class='co'># 3. positive music vs negative music</span>
<span class='va'>psy_contrast_table</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/as.data.frame.html'>as.data.frame</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span>stimulus_vs_response <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>3</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>/</span><span class='fl'>4</span>,
                                          music_vs_tones <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>0</span>, <span class='op'>-</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>/</span><span class='fl'>3</span>,
                                          positive_music_vs_negative_music <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>0</span>, <span class='fl'>0</span><span class='op'>)</span><span class='op'>/</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># for this example, we will choose SPM's default canonical hrf and upsample factor of 16</span>
<span class='va'>upsample_factor</span> <span class='op'>&lt;-</span> <span class='fl'>16</span>
<span class='va'>hrf</span> <span class='op'>&lt;-</span> <span class='fu'><a href='create_hrf_afni.html'>create_hrf_afni</a></span><span class='op'>(</span><span class='st'>"spmg1"</span>, <span class='va'>tr</span>, <span class='va'>upsample_factor</span><span class='op'>)</span>

<span class='co'># run function</span>
<span class='va'>psy_var</span> <span class='op'>&lt;-</span> <span class='fu'>create_psy_var</span><span class='op'>(</span>events <span class='op'>=</span> <span class='va'>psy_events</span>,
                          contrast_table <span class='op'>=</span> <span class='va'>psy_contrast_table</span>,
                          hrf <span class='op'>=</span> <span class='va'>hrf</span>,
                          tr <span class='op'>=</span> <span class='va'>tr</span>,
                          n_volumes <span class='op'>=</span> <span class='va'>n_volumes</span>,
                          upsample_factor <span class='op'>=</span> <span class='va'>upsample_factor</span>,
                          unlabeled_trial_type <span class='op'>=</span> <span class='st'>"response"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; waver -FILE 0.1875 /var/folders/_2/600bt_js7d5dpsn7nbfcpy4x88r01g/T//RtmpcvZh4j/fileca06a89c3ec.1D -input /var/folders/_2/600bt_js7d5dpsn7nbfcpy4x88r01g/T//RtmpcvZh4j/fileca0624da9573.1D -numout 1680 
#&gt; waver -FILE 0.1875 /var/folders/_2/600bt_js7d5dpsn7nbfcpy4x88r01g/T//RtmpcvZh4j/fileca061414152e.1D -input /var/folders/_2/600bt_js7d5dpsn7nbfcpy4x88r01g/T//RtmpcvZh4j/fileca062abfc4d7.1D -numout 1680 
#&gt; waver -FILE 0.1875 /var/folders/_2/600bt_js7d5dpsn7nbfcpy4x88r01g/T//RtmpcvZh4j/fileca06764ebbb3.1D -input /var/folders/_2/600bt_js7d5dpsn7nbfcpy4x88r01g/T//RtmpcvZh4j/fileca06acc79c6.1D -numout 1680 </div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>psy_var</span><span class='op'>)</span>
</div><div class='output co'>#&gt;                      Length Class      Mode
#&gt; events               3      data.frame list
#&gt; trial_type_by_volume 2      data.frame list
#&gt; contrast_table       3      data.frame list
#&gt; contrast             3      data.frame list
#&gt; upsample             3      data.frame list
#&gt; convolve             3      data.frame list
#&gt; downsample           3      data.frame list</div><div class='input'>
<span class='co'># references:</span>
<span class='co'># Lepping RJ, Atchley RA, Chrysikou E, Martin LE, Clair AA, Ingram RE, et al. Neural processing of emotional musical and nonmusical stimuli in depression.  PlosONE.  In Press.</span>
<span class='co'># Lepping RJ, Atchley RA, Savage CR. Development of a Validated Emotionally Provocative Musical Stimulus Set for Research. Psychology of Music. 2015; online before print. doi:10.1177/0305735615604509.</span>
<span class='co'># Lepping RJ, Atchley RA, Martin LE, Patrician TM, Stroupe N, Brooks WM, et al. Limbic responses to positive and negative emotionally evocative music: An fMRI study.  Society for Neuroscience annual meeting 2012 Oct 13-18; New Orleans, LA 2012.</span>
<span class='co'># Lepping RJ, Atchley RA, Martin LE, Brooks WM, Clair AA, Ingram RE, et al. Musical and nonmusical sounds evoke different patterns of neural activity: An fMRI study.  Psychonomic Society annual meeting; 2012 Nov 14-18; Minneapolis, MN 2012.</span>
<span class='co'># Lepping RJ, Atchley RA, Martin LE, Patrician TM, Ingram RE, Clair AA, et al. The effect of musical experiences and musical training on neural responses to emotionally evocative music and non-musical sounds.  Social and Affective Neuroscience Society annual conference 2013 Apr 12-13; San Francisco, CA 2013</span>
<span class='co'># Lepping RJ, Atchley RA, Patrician TM, Stroupe NN, Martin LE, Ingram RE, et al. Music to my ears: Neural responsiveness to emotional music and sounds in depression.  Society of Biological Psychiatry annual scientific convention 2013 May 16-18; San Francisco, CA 2013.</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Ekarin Eric Pongpipat.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


